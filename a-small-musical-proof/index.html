<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>A Small Musical Proof</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link
      href="data:image/gif;base64,R0lGODlhEAAQAPMKAAAAAAAAAFBxYfKRAOLSIJGhgfKRkfCxkPKykf7+/v///wAAAAAAAAAAAAAAAAAAACH5BAEAAAAALAAAAAAQABAAAARdEMhAa5UYBMJ7D9nGDQRJcqC2mWVLUtpHIdU3UUoe5MqlEjtFITgEggKIZIU2U04M0KQUakg9DdIk1IoJYJfVTChLE3cFgl0AzZ0g2BR0OqSgpXtpQdltVwj8SFYRADs="
      rel="icon"
    />
    <link href="https://blog.jfo.click/style.css" type="text/css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta property="og:title" content="A Small Musical Proof" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://blog.jfo.click/a-small-musical-proof" />
    <meta property="og:image" content="https://blog.jfo.click/desk.jpg" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@jeffowler" />
  </head>

  <body>
    <div id="content">
      <header class="site-header">
        <h5>jfo</h5> &mdash;
        <a href="https://blog.jfo.click">archive</a> &mdash;
        <a href="https://blog.jfo.click/feed.xml">feed</a> &mdash;
        <a href="mailto:jfo@jfo.click">contact</a>
      </header>

      <article>
        <p></p>
        <h1 class="post-title">A Small Musical Proof</h1>
        <sub>Feb 18, 2017</sub>
        <p></p>
        <div><p>Yesterday, <a href="http://www.milesokazaki.com/">Miles Okazaki</a> tweeted a thing on the twitter.</p>
<p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Was just noticing some things about 3-note diatonic fragments - any thoughts? Also, a cat with hearts and roses: <a href="https://t.co/IBL2uIXWMd">pic.twitter.com/IBL2uIXWMd</a></p>&mdash; Miles Okazaki (@milesokazaki) <a href="https://twitter.com/milesokazaki/status/832736147394658305">17 February 2017</a></blockquote></p>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>It&#39;s a sketch thinking about groups of notes and how many keys they can exist
in. This is a thing we can know.</p>
<h1 id="nerdsniped">Nerdsniped</h1>
<p>I banged out a little script to answer the question posed on the bottom left of the page:</p>
<blockquote>
<p>There are no groups of three notes that can be in 6 different keys (Is this true?)</p>
</blockquote>
<p>I used ruby because I still heart it and that&#39;s what I always use to bang out
little scripts. My coworker Jacob always uses perl for the same types of
things, which makes me think that in ten years Ruby will be like Perl is now,
which is an unrelated observation that I&#39;m going to trail off on.</p>
<p>Anyway, it turns out that it is, true, that is.. Let&#39;s see why.</p>
<p>First, we need a way to represent notes. Of course, there are a <a href="https://www.google.com/search?q=ruby+music+theory+library&amp;oq=ruby+music+theory+library&amp;aqs=chrome..69i57j69i64l3.3277j0j1&amp;sourceid=chrome&amp;ie=UTF-8#q=ruby+music+theory+library+gem">bunch of libs
and gems and
stuff</a>
that make it easy(er) to work with musical concepts and sound generation and
midi and stuff in ruby land, but I don&#39;t need any of that really. I just need a way to
represent notes. I don&#39;t really care about the note names, and enharmonics gum
everything up. I&#39;ll just use the numbers <code>0</code> through <code>11</code> to represent the 12
chromatic notes.</p>

<pre><code class="lang-ruby">[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]
</code></pre>
<p>I am thinking of <code>0</code> as a C natural, but it&#39;s really pretty arbitrary. If it
were <code>C</code>, the corresponding tones (using just flats) would be:</p>

<pre><code class="lang-ruby"><span class="hljs-comment"># C,  Db, D,  Eb, E,  F,  Gb, G,  Ab, A,  Bb, B</span>
[ <span class="hljs-number">0</span>,  <span class="hljs-number">1</span>,  <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">5</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>,  <span class="hljs-number">8</span>,  <span class="hljs-number">9</span>,  <span class="hljs-number">10</span>, <span class="hljs-number">11</span> ]
</code></pre>
<p>I can get the same numbers by describing them as a <code>range</code>, which is more
compact and logical in this case.</p>

<pre><code class="lang-ruby">(<span class="hljs-number">0</span>..<span class="hljs-number">11</span>)
</code></pre>
<p>Next, I need to have a way to represent keys. I&#39;m only concerned with 12 major
scales. To begin, I&#39;ll look at what would be &quot;C major&quot; in these numbers.</p>

<pre><code class="lang-ruby"><span class="hljs-comment"># C, D, E, F, G, A, B</span>
[ <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span> ]
</code></pre>
<p>Notice I don&#39;t repeat the 12- that would be another C. These numbers represent
C major. What if I want D major? In music land, I would just transpose this up
a major 2nd. With numbers, this is easy! Since each integer is a semitone (half
step), adding 2 to each number will transpose each of them up a whole step:</p>

<pre><code class="lang-ruby"><span class="hljs-comment"># D,  E,  F#, G,  A,  B   C#</span>
[ <span class="hljs-number">2</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>,  <span class="hljs-number">9</span>,  <span class="hljs-number">11</span>, <span class="hljs-number">13</span> ]
</code></pre>
<p>A wrinkle here, of course, is that 13 is too high for this system since I&#39;m
only concerned with notes within an octave. An easy fix is to mod 12 all the
numbers though!</p>

<pre><code class="lang-ruby"><span class="hljs-comment"># D,  E,  F#, G,  A,  B   C#</span>
[ <span class="hljs-number">2</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>,  <span class="hljs-number">9</span>,  <span class="hljs-number">11</span>, <span class="hljs-number">1</span> ]
</code></pre>
<p>What if I wanted to get to Ab major? That is 8 steps up. I&#39;ll start with the C
major array and map an addition of 8 mod 12 over it to get this new key:</p>

<pre><code class="lang-ruby">[ <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span> ].map {|<span class="hljs-params">note</span>| note + <span class="hljs-number">8</span> % <span class="hljs-number">12</span> }
</code></pre>
<p>Which yields:</p>

<pre><code class="lang-ruby">[<span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]
</code></pre>
<p>If you cross reference this with the note map above, you&#39;ll see that these
numbers do indeed match the notes of Ab major. Great job everyone.</p>
<p>So, I can put these together to get myself an array of arrays that represent
one of each of 12 keys!</p>
<p>I start with the canonical C major scale and that range of all twelve notes
from before:</p>

<pre><code class="lang-ruby">cmajor = [<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-number">11</span>]
roots = (<span class="hljs-number">0</span>..<span class="hljs-number">11</span>)
</code></pre>
<p>Now, for each root, I&#39;ll add its distance from C (which happens to be its
chromatic note value!) to the C major scale, and mod 12 it just like before.</p>

<pre><code class="lang-ruby">roots.map <span class="hljs-keyword">do</span> |<span class="hljs-params">root</span>|
    cmajor.map <span class="hljs-keyword">do</span> |<span class="hljs-params">note</span>|
        (note + root) % <span class="hljs-number">12</span>
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Which yields all of those keys:</p>

<pre><code class="lang-ruby">[
    [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>],
    [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>],
    [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>],
    [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>],
    [<span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>],
    [<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>],
    [<span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>],
    [<span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>],
    [<span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>],
    [<span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>],
    [<span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>],
    [<span class="hljs-number">11</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>]
]
</code></pre>
<h1 id="note-groups">Note groups</h1>
<p>Next, the question is: are there groups of any 3 notes that exist in 6 keys at
once?</p>
<p>For this, we need a way to generate all the possible three note sets. In other
words, we want all possible combinations of 3 notes made out of the range of
notes numbered <code>(0..11)</code></p>
<p>This is shockingly easy to do in Ruby land. Yay ruby! First we make an array
out of that range:</p>

<pre><code>(0..11).to_a
# [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
</code></pre>
<p>Next we call
<a href="https://ruby-doc.org/core-2.2.0/Array.html#method-i-combination">Array#combination</a>
with argument <code>3</code> and turn the resulting <a href="http://ruby-doc.org/core-2.2.0/Enumerator.html">Enumerator</a> back into an Array.</p>

<pre><code class="lang-ruby">(<span class="hljs-number">0</span>..<span class="hljs-number">11</span>).to_a.combination(<span class="hljs-number">3</span>).to_a
</code></pre>
<p>Which yields :</p>

<pre><code class="lang-ruby">[[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">8</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>], [<span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>], [<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]]
</code></pre>
<p>Note that this behaves differently than
<a href="https://ruby-doc.org/core-2.2.0/Array.html#method-i-permutation">Array#permutation</a>,
which will return arrays that for our purposes would be redundant (<code>[0,1,2]</code>
and <code>[2,0,1]</code> would be considered different, for example. <code>Array#combination</code>
does not include these redundancies).</p>
<h1 id="-the-dirty-work-https-www-youtube-com-watch-v-ghcsrblhn7a-"><a href="https://www.youtube.com/watch?v=ghcsrblhn7A">The Dirty Work</a></h1>
<p>Now that we have both a representation of all twelve major keys and a
collection of all the pitch sets we&#39;d like to know something about, we are in a
position to ask and answer some questions.</p>
<p>So a reminder: <code>keys</code> looks like this:</p>

<pre><code class="lang-ruby">cmajor = [<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-number">11</span>]
keys = roots.map <span class="hljs-keyword">do</span> |<span class="hljs-params">root</span>|
    cmajor.map <span class="hljs-keyword">do</span> |<span class="hljs-params">note</span>|
        (note + root) % <span class="hljs-number">12</span>
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>and <code>groups</code> looks like this:</p>

<pre><code class="lang-ruby">groups =  (<span class="hljs-number">0</span>..<span class="hljs-number">11</span>).to_a.combination(<span class="hljs-number">3</span>).to_a
</code></pre>
<p>And the question we want answered is &quot;Are there any groups of three notes that
exist in 6 keys.&quot;</p>
<p>A natural deconstruction of this question would be &quot;for each group, how many keys is it in?&quot; and further, &quot;for a given group and a given key, is the group in the key or not?&quot;</p>
<p>Let&#39;s take these 1 by 1 backwards.</p>
<p>How about this... is the note group <code>[0,4,7]</code> in the key of F? F looks like</p>

<pre><code class="lang-ruby">[<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>]
</code></pre>
<p>This turns out to be a very easy thing to check, using the <code>&amp;</code> operator.</p>

<pre><code class="lang-ruby">[<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>] &amp; [<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>] == [<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>]
</code></pre>
<p>Well hot damn.</p>

<pre><code class="lang-ruby"><span class="hljs-literal">true</span>
</code></pre>
<p>The <code>&amp;</code> operator is borrowed from the <a href="https://en.wikipedia.org/wiki/Bitwise_operation#AND">bitwise
operations</a>, but does here
what you&#39;d expect. It returns a new array that has only the elements that are
in both arrays. So,</p>

<pre><code class="lang-ruby">[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] &amp; [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]
</code></pre>
<p>is</p>

<pre><code class="lang-ruby">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]
</code></pre>
<p>This is the same as the <a href="https://en.wikipedia.org/wiki/Intersection_(set_theory">intersection of two
sets</a>), and
interestingly, ruby treats these arrays as sets in this case, discarding
elements that are the same.</p>

<pre><code class="lang-ruby">[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>] &amp; [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]
</code></pre>

<pre><code class="lang-ruby">[<span class="hljs-number">1</span>]
</code></pre>
<p>How about... is [4,9,11] in the key of Db major?</p>

<pre><code class="lang-ruby">[<span class="hljs-number">4</span>,<span class="hljs-number">9</span>,<span class="hljs-number">11</span>] &amp; [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>] == [<span class="hljs-number">4</span>,<span class="hljs-number">9</span>,<span class="hljs-number">11</span>]
</code></pre>
<p>So this says, &quot;take the intersection of the given note group and the given key.
Is the result the same as the given note group? If yes, all the notes in that
group were in the key.</p>
<p>This one&#39;s not though.</p>

<pre><code class="lang-ruby"><span class="hljs-literal">false</span>
</code></pre>
<p>Alright we know how to check if a single group is in a single key. Let&#39;s do the
next thing, which is to see <em>how many</em> keys a given group is in. This is also
easy!</p>
<p>Let&#39;s take group [3,5,9]. This would be Eb/D#, F, and A if you&#39;re keeping score at home.</p>
<p>Next we&#39;ll map over the <code>keys</code> and replace each element with the answer to the
question &quot;is this group in this key?&quot;</p>

<pre><code class="lang-ruby">keys.map <span class="hljs-keyword">do</span> |<span class="hljs-params">key</span>|
    [<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>] &amp; key == [<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>]
<span class="hljs-keyword">end</span>
</code></pre>
<p>This give us this result:</p>

<pre><code class="lang-ruby">[<span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>]
</code></pre>
<p>This group is only in one key, which you can figure from it&#39;s position is: Bb.</p>
<p>We&#39;re not super interested in the actual keys though, we only care about the
number of keys.</p>

<pre><code class="lang-ruby">keys.map <span class="hljs-keyword">do</span> |<span class="hljs-params">key</span>|
    [<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>] &amp; key == [<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>]
<span class="hljs-keyword">end</span>.count(<span class="hljs-literal">true</span>)
</code></pre>
<p>Now we get back a single number. <code>1</code>.</p>
<p>Penultimate question. &quot;For <em>each group of three notes</em>, how many keys is it in.&quot;</p>
<p>We wrap that above block in <em>another</em> map, this time over the groups themselves.</p>

<pre><code class="lang-ruby">groups.map <span class="hljs-keyword">do</span> |<span class="hljs-params">group</span>|
    keys.map <span class="hljs-keyword">do</span> |<span class="hljs-params">key</span>|
        group &amp; key == group
    <span class="hljs-keyword">end</span>.count(<span class="hljs-literal">true</span>)
<span class="hljs-keyword">end</span>
</code></pre>
<p>This replaces each group of notes with the number of keys it appears in. Again,
we&#39;re discarding which keys, we don&#39;t really care about that.</p>

<pre><code class="lang-ruby">[<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>]
</code></pre>
<p>Finally, all we have to do now is ask: &quot;Does this array contain the number 6?&quot;
(let&#39;s pretend I assigned the above array to <code>counts</code>)</p>

<pre><code class="lang-ruby">arr.contain? <span class="hljs-number">6</span>
<span class="hljs-comment"># false</span>
</code></pre>
<p>And that&#39;s our answer. The whole thing could look like this:</p>

<pre><code class="lang-ruby">cmajor = [<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-number">11</span>]
roots = (<span class="hljs-number">0</span>..<span class="hljs-number">11</span>)
keys = roots.map <span class="hljs-keyword">do</span> |<span class="hljs-params">root</span>|
    cmajor.map <span class="hljs-keyword">do</span> |<span class="hljs-params">note</span>|
        (note + root) % <span class="hljs-number">12</span>
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

groups =  (<span class="hljs-number">0</span>..<span class="hljs-number">11</span>).to_a.combination(<span class="hljs-number">3</span>).to_a

counts = groups.map <span class="hljs-keyword">do</span> |<span class="hljs-params">group</span>|
    keys.map <span class="hljs-keyword">do</span> |<span class="hljs-params">key</span>|
        group &amp; key == group
    <span class="hljs-keyword">end</span>.count(<span class="hljs-literal">true</span>)
<span class="hljs-keyword">end</span>

p counts.<span class="hljs-keyword">include</span>? <span class="hljs-number">6</span>
<span class="hljs-comment"># false</span>
</code></pre>
<h1 id="compactify-">Compactify.</h1>
<p>Look at all those long variable names and multi-line blocks.. What an
abomination. What kind of functional programmer would I be if I let myself by
without making this into an inexplicable one liner. Not much of one, that&#39;s
what kind! Lol jk but Imma do it anyway.</p>

<pre><code class="lang-ruby">(<span class="hljs-number">0</span>..<span class="hljs-number">11</span>).to_a.combination(<span class="hljs-number">3</span>).to_a.map{|<span class="hljs-params">g</span>|(<span class="hljs-number">0</span>..<span class="hljs-number">11</span>).map{|<span class="hljs-params">i</span>|[<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-number">11</span>].map{|<span class="hljs-params">e</span>|(e+i)%<span class="hljs-number">12</span>}}.map{|<span class="hljs-params">k</span>|(g&amp;k)==g}.count(<span class="hljs-literal">true</span>)}.to_a.<span class="hljs-keyword">include</span>?(<span class="hljs-number">6</span>)
</code></pre>
<p>As expected, <code>false</code>. Go team.</p>
<h1 id="coda">Coda</h1>
<p>Ok, so, this is all a little contrived and I realize that. But it&#39;s a great
example of something! There was a question that had an answer, and that answer
was definitively worked out through every conceivable combination of some
things. It wasn&#39;t the smartest way to figure this out, there are easier and
more <a href="https://twitter.com/themadwort/status/832738527209103360">logical ways to do
so</a>. It was a brute
force method, but it took me only a couple of minutes to produce initially, and it
answered the question just fine, relying on first principles and knowledge of
only how many notes there are and what the structure of a major scale is.</p>
<p>Thanks to Miles Okazaki for the nerd snipe, and also for being a really kick
ass <a href="https://www.youtube.com/watch?v=MFNldzReNq8">musician</a> and
<a href="http://fundamentalsofguitar.com/">pedagogue</a>.</p>
<p>This has been a short post. I&#39;m trying to get better maybe at writing short
fast posts. I&#39;m working on a long one though that has a bunch of math and stuff
in it, so see you next time I guess, dear reader.</p>
</div>
      </article>
    </div>

    <script async defer src="https://analytics.jfo.click/latest.js"></script>
    <noscript
      ><img src="https://analytics.jfo.click/noscript.gif" alt=""
    /></noscript>
  </body>
</html>
